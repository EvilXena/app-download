<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Generatore QR Code</title>
  <meta name="description" content="Genera QR code per i link degli store" />
  <meta name="theme-color" content="#0f172a" />
  <style>
    :root{
      --bg:#0b1020;
      --card:#111936;
      --text:#e5e7eb;
      --muted:#9aa3b2;
      --primary:#4f46e5;
      --primary-2:#7c3aed;
      --btn-bg:#0f172a;
      --btn-hover:#151f3e;
      --ring: rgba(99,102,241,0.45);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 800px at 80% -10%, rgba(124,58,237,.20), transparent 60%),
        radial-gradient(1000px 700px at -10% 0%, rgba(79,70,229,.25), transparent 55%),
        linear-gradient(180deg, #0b1020 0%, #0b1020 100%);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .container{
      width:100%;
      max-width:600px;
      padding:28px;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), transparent 60%) , var(--card);
      border:1px solid rgba(255,255,255,0.08);
      border-radius:20px;
      box-shadow: 0 20px 50px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.06);
      backdrop-filter: blur(6px);
    }
    h1{
      margin:0 0 24px 0;font-size: clamp(24px, 4vw, 32px);line-height:1.15;
      background: linear-gradient(90deg, #fff, #c7d2fe 40%, #a5b4fc);
      -webkit-background-clip: text;background-clip:text;color:transparent;
      text-align:center;
    }
    .input-group{
      margin-bottom:20px;
    }
    label{
      display:block;margin-bottom:8px;color:var(--text);font-weight:600;
    }
    input[type="url"], input[type="text"]{
      width:100%;padding:12px 16px;border:1px solid rgba(255,255,255,0.1);
      border-radius:12px;background:var(--btn-bg);color:var(--text);
      font-size:16px;transition:border-color 0.2s ease;
    }
    input[type="url"]:focus, input[type="text"]:focus{
      outline:none;border-color:var(--primary);box-shadow:0 0 0 3px var(--ring);
    }
    .btn{
      appearance:none;border:none;background:var(--primary);
      color:white;padding:12px 24px;border-radius:12px;
      font-weight:600;cursor:pointer;transition:all 0.2s ease;
      width:100%;font-size:16px;
    }
    .btn:hover{
      background:var(--primary-2);transform:translateY(-1px);
    }
    .btn:disabled{
      background:var(--muted);cursor:not-allowed;transform:none;
    }
    .qr-container{
      margin-top:24px;text-align:center;
    }
    .qr-result{
      display:none;margin-top:20px;
    }
    .qr-result.show{
      display:block;
    }
    .qr-codes{
      display:flex;gap:24px;justify-content:center;flex-wrap:wrap;
    }
    .qr-item{
      display:flex;flex-direction:column;align-items:center;gap:12px;
      padding:20px;background:rgba(255,255,255,0.03);
      border-radius:16px;border:1px solid rgba(255,255,255,0.08);
    }
    .qr-item canvas{
      border-radius:12px;box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .qr-item p{
      margin:0;color:var(--muted);font-size:14px;font-weight:600;
    }
    .download-btn{
      background:var(--btn-bg);color:var(--text);border:1px solid rgba(255,255,255,0.1);
      padding:8px 16px;border-radius:8px;text-decoration:none;
      font-size:14px;transition:all 0.2s ease;
    }
    .download-btn:hover{
      background:var(--btn-hover);border-color:rgba(255,255,255,0.16);
    }
    .preset-buttons{
      display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap;
    }
    .preset-btn{
      background:var(--btn-bg);color:var(--text);border:1px solid rgba(255,255,255,0.1);
      padding:8px 16px;border-radius:8px;text-decoration:none;
      font-size:14px;transition:all 0.2s ease;cursor:pointer;
    }
    .preset-btn:hover{
      background:var(--btn-hover);border-color:rgba(255,255,255,0.16);
    }
    @media (max-width:520px){
      .qr-codes{gap:16px}
      .qr-item canvas{width:120px;height:120px}
      .preset-buttons{flex-direction:column}
    }
  </style>
</head>
<body>
  <main class="container" role="main">
    <h1>Generatore QR Code</h1>
    
    <div class="preset-buttons">
      <button class="preset-btn" onclick="setPreset('android')">Google Play</button>
      <button class="preset-btn" onclick="setPreset('apple')">App Store</button>
      <button class="preset-btn" onclick="setPreset('custom')">Personalizzato</button>
    </div>

    <form id="qrForm">
      <div class="input-group">
        <label for="urlInput">URL o Testo:</label>
        <input type="text" id="urlInput" placeholder="Inserisci URL o testo per il QR code" required>
      </div>
      
      <div class="input-group">
        <label for="labelInput">Etichetta (opzionale):</label>
        <input type="text" id="labelInput" placeholder="Es: Android, Apple, ecc.">
      </div>
      
      <button type="submit" class="btn" id="generateBtn">Genera QR Code</button>
    </form>

    <div class="qr-result" id="qrResult">
      <div class="qr-codes">
        <div class="qr-item">
          <canvas id="qrCanvas"></canvas>
          <p id="qrLabel">QR Code</p>
          <a href="#" id="downloadBtn" class="download-btn" download="qrcode.png">Scarica PNG</a>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script>
    const presets = {
      android: 'https://play.google.com/store/apps/details?id=com.shaggyowl.app&hl=it',
      apple: 'https://apps.apple.com/it/app/app-palestre/id672418135',
      custom: ''
    };

    function setPreset(type) {
      const urlInput = document.getElementById('urlInput');
      const labelInput = document.getElementById('labelInput');
      
      if (type === 'custom') {
        urlInput.value = '';
        labelInput.value = '';
        urlInput.placeholder = 'Inserisci URL o testo per il QR code';
      } else {
        urlInput.value = presets[type];
        labelInput.value = type === 'android' ? 'Android' : 'Apple iOS';
      }
      urlInput.focus();
    }

    document.getElementById('qrForm').addEventListener('submit', function(e) {
      e.preventDefault();
      generateQRCode();
    });

    function generateQRCode() {
      const urlInput = document.getElementById('urlInput');
      const labelInput = document.getElementById('labelInput');
      const qrCanvas = document.getElementById('qrCanvas');
      const qrLabel = document.getElementById('qrLabel');
      const qrResult = document.getElementById('qrResult');
      const downloadBtn = document.getElementById('downloadBtn');
      const generateBtn = document.getElementById('generateBtn');

      const text = urlInput.value.trim();
      const label = labelInput.value.trim() || 'QR Code';

      if (!text) {
        alert('Inserisci un URL o testo valido');
        return;
      }

      generateBtn.disabled = true;
      generateBtn.textContent = 'Generando...';

      QRCode.toCanvas(qrCanvas, text, {
        width: 200,
        margin: 2,
        color: {
          dark: '#4f46e5',
          light: '#ffffff'
        }
      }, function(error) {
        generateBtn.disabled = false;
        generateBtn.textContent = 'Genera QR Code';
        
        if (error) {
          alert('Errore nella generazione del QR code: ' + error);
          return;
        }

        qrLabel.textContent = label;
        qrResult.classList.add('show');
        
        // Configura download
        qrCanvas.toBlob(function(blob) {
          const url = URL.createObjectURL(blob);
          downloadBtn.href = url;
          downloadBtn.download = `qrcode-${label.toLowerCase().replace(/\s+/g, '-')}.png`;
        });
      });
    }

    // Genera QR code automaticamente se c'Ã¨ un preset
    document.addEventListener('DOMContentLoaded', function() {
      setPreset('android');
    });
  </script>
</body>
</html>
